### Transaction (트랜잭션)

> 데이터베이스의 상태를 변화시키는 논리적인 작업 단위
> 

*데이터베이스의 상태를 변화시키는 작업 단위*

*→ 데이터베이스에 접근하여 데이터를 읽고, 쓰고, 수정하고, 삭제하는 등의 작업*

<br>

### 트랜잭션의 조건

- 단일 트랜잭션은 데이터베이스에 읽거나 쓰는 등의 작업을 수행하는 여러 개의 쿼리를 요구
- 트랜잭션을 수행하면서 쿼리의 일부만 수행되는 일은 없음
- 모든 작업이 완벽하게 처리되거나 또는 처리되지 못하는 경우 원상태로 복구 됨

<br>

### 트랜잭션을 조작하여 DB의 무결성(Integrity)를 유지

**1. 원자성 (Atomicity):**
트랜잭션은 데이터베이스 작업의 최소 단위이며, 트랜잭션 내의 모든 작업은 완벽하게 수행되거나 아예 수행되지 않아야 합니다. 트랜잭션 중간에 문제가 발생하면 이전 상태로 롤백(원복)되어야 합니다. 이것은 트랜잭션이 논리적인 작업 단위로 정의되고 일부만 수행되는 것을 방지합니다.

<br>

**2. 일관성 (Consistency):**
트랜잭션이 완료된 후에도 데이터베이스의 상태는 트랜잭션 이전과 일관성을 유지해야 합니다. 트랜잭션 도중에 다른 작업이 데이터를 변경해도 트랜잭션은 변경된 데이터를 참조하지 않고 일관된 데이터로 작업해야 합니다.

<br>

**3. 고립성 (Isolation):**
각각의 트랜잭션은 서로에게 영향을 주지 않고 독립적으로 실행되어야 합니다. 즉, 한 트랜잭션의 작업이 다른 트랜잭션에게 미치는 영향이 없어야 합니다. 다른 트랜잭션이 진행 중인 데이터를 참조하지 못하고, 변경된 데이터를 공유하지 않아야 합니다.

<br>

**4. 지속성 (Durability):**
트랜잭션이 성공적으로 완료되면 해당 작업 결과가 영구적으로 데이터베이스에 저장되어야 합니다. 시스템 장애 또는 중단 상황에서도 트랜잭션의 결과는 보존되어야 합니다.

<br>

***트랜잭션을 Commit(확정) 또는 Rollback(취소)하는 데 사용됩니다.***

- **Commit:** 트랜잭션의 모든 작업이 성공적으로 수행되고 데이터베이스가 업데이트되어야 할 때 사용됩니다. Commit을 실행하면 트랜잭션 결과가 영구적으로 저장됩니다.

<br>

- **Rollback:** 트랜잭션 중에 오류가 발생하거나 트랜잭션을 취소해야 할 때 사용됩니다. Rollback을 실행하면 트랜잭션 중에 수행한 모든 작업이 취소되고 데이터베이스는 트랜잭션 이전 상태로 원복됩니다.

<br>

**트랜잭션의 상태:**

- **Active:** 트랜잭션이 활성 상태로 실행 중인 상태입니다.

<br>

- **Failed:** 트랜잭션 실행 중에 오류가 발생하여 더 이상 진행할 수 없는 상태입니다.

<br>

- **Partially Committed:** 트랜잭션의 Commit 명령이 도착한 상태로, 아직 완전히 Commit되지 않은 상태입니다.

<br>

- **Aborted:** 트랜잭션이 취소되고 Rollback 작업을 수행하여 이전 상태로 돌아간 상태입니다.

<br>

- **Committed:** 트랜잭션이 완료되고 모든 작업이 성공적으로 Commit된 상태입니다.

<br>

**Deadlock (교착 상태):**
여러 트랜잭션이 서로의 작업이 끝나기를 기다리며 진행하지 못하는 상황을 말합니다. 이러한 상황을 방지하기 위해 트랜잭션을 커밋하거나 트랜잭션 실행 순서를 조절하여 교착 상태를 피할 수 있습니다. 또한 lock을 사용하여 동시에 여러 트랜잭션이 동일한 자원에 접근하지 못하도록 제어할 수 있습니다.